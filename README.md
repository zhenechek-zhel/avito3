# ВНИМАНИЕ!!! ЭТО ПРИМЕР ДОКУМЕНТАЦИИ
#ВАМ ТОЖЕ ОЧЕНЬ ПРИГОДИТСЯ

## Сущности

[Схема базы данных](https://dbdiagram.io/embed/614c9d0e825b5b0146107aac)

```
* - поля ссылающиеся на другие Entity;
** - поля ссылающиеся на Enum.
```

### Address:

#### Поля:

- **id** - уникальный идентификационный номер адреса;
- **cityIndex** - поле хранящее почтовый индекс;
- **country** - поле хранящее Страну*;
- **city** - поле хранящее Город*;
- **street** - поле хранящее название улицы;
- **house** - поле хранящее дом (String);
- **users** -Set связывающие адреас с конкретными Пользователями(@ManyToMany)*.

```
Сущность представляет собой набор данных предназначенных для определения 
адреса доставки заказа/ расположения магазина / расположения пользователя.
```

### CartItem:

#### Поля:

- **id** - уникальный идентификационный номер карточки товара;
- **quantity** - поле хранящее количество товаров.
- **user** - поле хранящее User* который выбрал товар(@ManyToOne);
- **shop** - поле хранящее Магазин* в котором был выбран товар(@OneToOne);
- **item** - коллекция(List) хранящая выбранный Товар(@OneToMany);




#### Методы:

```
Сущность предназначенная для отображения товара который пользователь пожелал 
положить в свою корзину для дальнейшего формирования заказа. Для каждого уникального 
товара создается отдельная сущность с указанием его желаемого количества для приобретения.
```

### Category:

#### Поля:

- **id** - уникальный идентификационный номер категории товара;
- **name** - уникальное поле хранящее название категории товара.
- **item** - коллекция(Set) предметов, находящихся в данной категории(@ManyToMany)

```
Сущность для создания и присвоения категории товару. Позволяет реализовать функционал 
для фильтрации товара по интересующим пользователя категориям.
```

### Chat:

#### Поля:

- **id** - уникальный идентификационный номер чата;
- **members** - список Пользователей* которые участвуют в чате;
- **messages** - список Сообщений* который содержит чат.

```
Сущность представляющая собой чат для общения пользователей, который хранит 
список пользователей и список пересылаемых сообщений в чате.
```

### City:

#### Поля:

- **id** - уникальный идентификационный номер города;
- **name** - уникальное поле хранящие название города;
- **country** - поле хранящее Страну* в которой находится город;
- **addresses** - поле хранящее список Адресов* относящихся к данной улице.

```
Сущность предоставляющая город, который входит в состав Адреса*.
```

### Country:

#### Поля:

- **id** - уникальный идентификационный номер страны;
- **name** - уникальное поле хранящие название страны;
- **cities** - список Городов* находящихся в данной стране.

```
Сущность представляющая страну, которая входит в состав Адреса* 
и имеет связь с Городом*
```


### Coupon:

#### Поля:

- **id** - уникальный идентификационный номер страны;
- **start** - Calendar value
- **end** - Calendar value
- **shop** - поле, содержащее магазин, который владеет купоном(@ManyToOne);
- **usersInCoupon** - коллекция (Set) юзеров, к которым пренадлжит купон.

```
Сущность представляющая купон, котроый пренадлежит пользователю
```



### Discount:

#### Поля:

- **id** - уникальный идентификационный номер скидки;
- **minOrder** - минимальный заказ для получения скидки;
- **percentage** - поле хранящее скидку в % от покупки;
- **fixedDiscount** - фиксированное значение скидки от величины покупки;
- **shop** - поле хранящее Магазин* который выдал скидку;
- **user** - скидка магазина выданная конкретному Пользователю*.
- **users** - коллекция Set<User> "принадлежащая" Set<Discount>(@ManyToMany)

```
Сущность предоставляющая поля для определения величины скидки. 
Имеет связи с Магазином*, в котором была выдана и Пользователем*, 
которому была выдана скидка.
```

### Favorite:

#### Поля:

- **id** - уникальный идентификационный номер избранного товара/магазина;
- **shops** - список избранных Магазинов*;
- **items** - список избранных Товаров*;
- **user** - определяет Пользователя* создавшего свой набор избранного.

```
Сущность  для хранения избранного определенного пользователя. Хранит 
избранные  магазины и/или товары.
```

### Image:

#### Поля:

- **id** - уникальный идентификационный номер изображения;
- **url** - ссылка на сторонний ресурс хранящий изображение;
- **picture** - поле хранящие код для представления изображения;
- **isMain** - поле определяющее статус изображения как основное для отображения;
- **user** - поле хранящее Пользователя*.

```
Сущность для хранения изображений для товара/ логотипа магазина/ 
изображения профиля пользователя. При загрузки изображений, они хранятся в базе 
данных в виде массива байт. Можно загрузить ссылку на сторонний ресурс для изображения.
Ссылка будет храниться в базе данных. Есть поле-флаг, которое помечает какое изображение 
будет отображаться на витрине, если товар имеет несколько изображений.
```

### Item:

#### Поля:

- **id** - уникальный идентификационный номер товара;
- **name** - поле хранящее название товара;
- **price**- поле хранящее цену товара;
- **categories** - коллекция(Set) Категорий* к которым относится данный товар(@ManyToMany);
- **cartItem** - поле, хранящее карзину, в которой лужит товар(@ManyToOne)
- **images** - список Изображений* для товара;
- **reviews** - список Отзывов* для товара;
- **count** - поле хранящее количество товара данного вида;
- **rating** - поле хранящее рейтинг товара в цифровом выражении;
- **description** - поле хранящее описание товара;
- **discount** - поле которое устанавливает величину скидки на товар;
- **shop** - описывает Магазин* в котором продается товар;
- **isModerated** - поле отражающее статус промодерировано/не промодерировано;
- **isModerateAccept** - поле отражающее статус после модерации, прошел модерацию/не прошел модерацию;
- **moderatedRejectReason** - поле описывающие причину отклонения товара модераторов;
- **isPretendentToBeDeleted** - поле-флаг переводящее товар в статус “на удаление”.

```
Сущность представляющая товар. Любой товар должен пройти модерацию у пользователя 
с необходимой ролью. После успешной модерации товар попадает на страницу доступную всем пользователям.
```

### Message:

#### Поля:

- **id** - уникальный идентификационный номер сообщения;
- **chat** - поле хранящее Чат* к которому относится сообщение;
- **to** - поле хранящее какому Пользователю* адресовано сообщение;
- **from** - поле хранящее от какого Пользователя* пришло сообщение;
- **textMessage** - поле хранящее содержание сообщения;
- **viewed** - поле отражающее статус сообщения прочитано/не прочитано.

```
Сущность представляющая возможность хранить сообщения. Используется 
для чата между пользователями.
```

### Order:

#### Поля:

- **id** - уникальный идентификационный номер заказа;
- **items** - список Товаров* входящих в заказ;
- **date** - поля хранящее дату заказа;
- **status** - поле хранящее Статус** заказа;
- **address** - поле хранящее Адрес* доставки;
- **total** - поле хранящее сумму(в денежном выражении) заказа;
- **user** - поле хранящее Пользователя* сделавшего заказ;(@ManyToOne)
- **buyerName** - поле хранящее имя получателя заказа;
- **buyerPhone** - поле хранящее телефон для связи с получателем заказа;

```
Сущность представляющая собой заказ формирующийся Пользователем* на 
основании товара помещенного в корзину. Имеет поле для определения статуса заказа.
```

### Review:

#### Поля:

- **id** - уникальный идентификационный номер отзыва;
- **dignity** - поле хранящее описание “плюсов”;
- **flaw** - поле хранящее описание “минусов”;
- **text** - поле хранящее тело сообщения;
- **date** - поле хранящее дату опубликования отзыва;
- **rating** - поле показывающее рейтинг(в числовом выражении) отзыва;
- **user** - поле хранящее Пользователя* на которого оставили отзыв;
- **shop** - поле хранящее Магазин* на который оставили отзыв;
- **item** - поле хранящее Товар* на который оставили отзыв;
- **isModerated** - поле отражающее статус промодерировано/не промодерировано;
- **isModerateAccept** - поле отражающее статус после модерации, прошел модерацию/не прошел модерацию;
- **moderatedRejectReason** - поле описывающие причину отклонения публикации отзыва;

```
Сущность представляющая собой отзыв на магазин/товар/пользователя.
```

### Role:

#### Поля:

- **id** - уникальный идентификационный номер роли;
- **name** - уникальное поле хранящее название роли;
- **users** - коллекция(Set) Пользователей* имеющих роль(@ManyToMany).

```
Сущность определяющая порядок прав пользования Пользователя* в системе.
```

### Shop:

#### Поля:

- **id** - уникальный идентификационный номер магазина;
- **name** - уникальное поле хранящее название магазина;
- **email** - поле хранящее е-маил адрес магазина;
- **phone** - поле хранящее номер телефона магазина;
- **description** - поле хранящее информацию о магазине;
- **location** - поле хранящее Страну* расположения магазина;
- **items** - поле хранящее список Товаров* продающихся в магазине;
- **reviews** - поле хранящее список Отзывов* на магазин;
- **logo** - поле хранящее Изображение* магазина(логотип);
- **rating** - поле показывающее рейтинг(в числовом выражении) магазина;
- **users** - Set Пользователей* которые связаны с  магазинами(@ManyToMany);
- **cartItem** - поле хранящее корзину с товаром, принадлежащую магазину(@OneToOne)
- **discounts** - Set<Discount> принадлежащих магазину(@OneToMany, однонаправленная)
- **feedback** - коллекция Set feedback, замаплена на shop (@OneToMany, однонаправленная)
- **users** - коллекция Set users(@ManyToMany, mappedBy = "shops"(в User))
- **discounts** - поле хранящее коллекцию Скидок* выдаваемую данным магазином;
- **isModerated** - поле отражающее статус промодерировано/не промодерировано;
- **isModerateAccept** -поле отражающее статус после модерации, прошел модерацию/не прошел модерацию;
- **moderatedRejectReason** - поле описывающие причину отклонения по результатам модерации;
- **isPretendentToBeDeleted** - поле-флаг переводящее магазин в статус “на удаление”.

```
Сущность представляющая собой магазин, который предоставляет пользователю товар 
для покупки. Данная сущность должна проходить обязательную модерацию пользователем, 
с ролью определяющей такую возможность.
```

### User:

#### Поля:

- **id** - уникальный идентификационный номер пользователя;
- **email** - уникальный е-маил адрес пользователя;
- **username** - уникальный логин пользователя;
- **password** - пароль пользователя;
- **activate** - поле-флаг отвечающее за активацию учетной записи пользователя;
- **activationCode** - поле хранящее код для подтверждения активации учетной записи пользователя;
- **phone** - уникальное поле хранящее телефонный номер пользователя;
- **firstName** - поле хранящее имя пользователя;
- **lastName** - поле хранящее фамилию пользователя;
- **address** - Set Адреса* нахождения пользователя(@ManyToMany);
- **roles** - поле хранящее сет доступных Ролей* для пользователя;
- **gender** - поле хранящее Пол** пользователя;
- **birthday** - поле хранящее дату-рождения пользователя;
- **images** - коллекция (Set) Изображений* пользователя для профиля учетной записи(@OneToMany однонаправленная с JoinColumn);
- **coupons** - collection (Set) купонов, принадлежащих юзеру(@ManyToMany)
- **cart** - коллеккия Set хранящее  Карточки Товара* помещенную в корзину пользователя(@OneToMany);
- **orders** - коллекция Set Заказов* пользователя(@OneToMany);
- **reviews** - коллекция Set которые оставил пользователь(@OneToMany, однонаправленная с JoinColumn);
- **shops** - коллекция Set Магазинов* принадлежащих пользователю(@ManyToMany);
- **favorite** - поле содержащее Избранное* пользователя;
- **discounts** - Коллекция Set<Discount> предоставленные магазинами пользователю(@ManyToMany).

```
Сущность определяющая пользователя который может покупать и продавать товары. 
Для покупки товара необходимо поместить товар вначале в корзину заказов с помощью 
сущности CartItem, далее формировать заказ при помощи сущности Order. Продавать 
товар можно как физическое лицо, так и через магазин - юридическое лицо. Можно 
открывать несколько магазинов на одного пользователя.
```

## Промежуточные сущности

### chat_members:

#### Поля:

- **chat_id** - поле ссылающиеся на уникальный номер Чата*;
- **members_id** - поле ссылающиеся на уникальный номер Участников*.

```
Промежуточная сущность для реализации свзязи many-to-many Чата* с Участником*.
```

### chat_messages:

#### Поля:

- **chat_id** - поле ссылающиеся на уникальный номер Чата*;
- **messages_id** - поле ссылающиеся на уникальный номер Сообщения*.

```
Промежуточная сущность для реализации свзязи one-to-many Чата* с Сообщением*.
```

### country_city:

#### Поля:

- **country_id** - поле ссылающиеся на уникальный номер Страны*;
- **city_id** - поле ссылающиеся на уникальный номер Города*.

```
Промежуточная сущность для реализации свзязи one-to-many Страны* с Городом*.
```

### favorite_item:

#### Поля:

- **favorite_id** - поле ссылающиеся на уникальный номер Избранного*;
- **item_id** - поле ссылающиеся на уникальный номер Товара*.

```
Промежуточная сущность для реализации свзязи many-to-many Избранного* с Товаром*.
```

### favorite_shop:

#### Поля:

- **favorite_id** - поле ссылающиеся на уникальный номер Избранного*;
- **shop_id** - поле ссылающиеся на уникальный номер Магазина*.

```
Промежуточная сущность для реализации свзязи many-to-many Избранного* с Магазином*.
```

### item_category:

#### Поля:

- **item_id** - поле ссылающиеся на уникальный номер Товара*;
- **category_id** - поле ссылающиеся на уникальный номер Категории*.

```
Промежуточная сущность для реализации свзязи many-to-many Товара* с Категорией*.
```

### item_image:

#### Поля:

- **item_id** - поле ссылающиеся на уникальный номер Товара*;
- **image_id** - поле ссылающиеся на уникальный номер Изображения*.

```
Промежуточная сущность для реализации свзязи many-to-many Товара* с Изображением*.
```

### item_review:

#### Поля:

- **item_id** - поле ссылающиеся на уникальный номер Товара*;
- **review_id** - поле ссылающиеся на уникальный номер Отзыва*.

```
Промежуточная сущность для реализации свзязи one-to-many Товара* с Отзывом*.
```

### orders_item:

#### Поля:

- **orders_id** - поле ссылающиеся на уникальный номер Заказа*;
- **item_id** - поле ссылающиеся на уникальный номер Товара*.

```
Промежуточная сущность для реализации свзязи many-to-many Заказа* с Товаром*.
```

### shop_discount:

#### Поля:

- **shop_id** - поле ссылающиеся на уникальный номер Магазин*;
- **discount_id** - поле ссылающиеся на уникальный номер Скидки*.

```
Промежуточная сущность для реализации свзязи one-to-many Магазина* со Скидкой*.
```

### shop_item:

#### Поля:

- **shop_id** - поле ссылающиеся на уникальный номер Магазин*;
- **item_id** - поле ссылающиеся на уникальный номер Товара*.

```
Промежуточная сущность для реализации свзязи one-to-many Магазина* с Товаром*.
```

### shop_review:

#### Поля:

- **shop_id** - поле ссылающиеся на уникальный номер Магазин*;
- **review_id** - поле ссылающиеся на уникальный номер Отзыва*.

```
Промежуточная сущность для реализации свзязи one-to-many Магазина* с Отзывом*.
```

### user_cart:

#### Поля:

- **user_id** - поле ссылающиеся на уникальный номер Пользователя*;
- **cart_id** - поле ссылающиеся на уникальный номер Корзины*.

```
Промежуточная сущность для реализации свзязи many-to-many Пользователя* с Корзиной*.
```

### user_discount:

#### Поля:

- **user_id** - поле ссылающиеся на уникальный номер Пользователя*;
- **discount_id** - поле ссылающиеся на уникальный номер Скидки*.

```
Промежуточная сущность для реализации свзязи one-to-many Пользователя* со Скидкой*.
```

### user_orders:

#### Поля:

- **user_id** - поле ссылающиеся на уникальный номер Пользователя*;
- **orders_id** - поле ссылающиеся на уникальный номер Заказа*.

```
Промежуточная сущность для реализации свзязи one-to-many Пользователя* с Заказом*.
```

### user_review:

#### Поля:

- **user_id** - поле ссылающиеся на уникальный номер Пользователя*;
- **review_id** - поле ссылающиеся на уникальный номер Отзыва*.

```
Промежуточная сущность для реализации свзязи one-to-many Пользователя* с Отзывом*.
```

### user_role:

#### Поля:

- **user_id** - поле ссылающиеся на уникальный номер Пользователя*;
- **review_id** - поле ссылающиеся на уникальный номер Роли*.

```
Промежуточная сущность для реализации свзязи many-to-many Пользователя* с Ролью*.
```

### user_shop:

#### Поля:

- **user_id** - поле ссылающиеся на уникальный номер Пользователя*;
- **shop_id** - поле ссылающиеся на уникальный номер Магазина*.

```
Промежуточная сущность для реализации свзязи one-to-many Пользователя* с Магазином*.
```